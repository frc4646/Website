<!DOCTYPE html>
<html>
  <head>
    <title>RobertChat Login</title>
    <style>
    
      body{
        text-align:center;
        background-color:#444444;
        font-family:'Verdana',sans-serif;
      }
      h1{
        color:white;
      }
      
      a{
        color:white;
        transition:2s/*.2*/
      }
      a:hover{
        color:#999999;
        font-size:150vh;
        transition:240s;
        transition-timing-function: cubic-bezier( 1, 0.02, 0.76, 1.02 );
      }
      
      
      input{
        width:30vw;
        height:5vh;
        border:solid 1vw #2ecc71;
        background-color: #3498db;
        font-family:'Verdana',sans-serif;
        transition:1s;
      }
      input:hover{
        width:30.5vw;
        height:20vh;
        border:solid 1vw #3498db;
        background-color: #2ecc71;
        font-family:'Verdana',sans-serif;
      }
      button{
        height:4.5vw;
        border:solid 1vw #2ecc71;
        background-color: #3498db;
        font-family:'Verdana',sans-serif;
        width:4.5vw;
        transition:1s;
      }
      button:hover{
        height:20vw;
        border:solid 1vw #3498db;
        background-color: #2ecc71;
        font-family:'Verdana',sans-serif;
        width:5vw;
      }
    </style>
  </head>
  <body>
    <h1><a href="/">RobertChat</a> Login</h1>
    <input id="username" placeholder="Username">    <input id="password" placeholder="Password" type="password"> <button onclick="login()">Login</button>
    <br><br><a href="mailto:robert@rbrt.us">Help</a>
   
    
    
    <script src="//robertchat.glitch.me/socket.io/socket.io.js"></script>
    <script>
//      var socket = io();
  var socket = io.connect('https://robertchat.glitch.me',{secure: true,    rejectUnauthorized: false});
      function login(){
        socket.emit("login",document.getElementById("username").value,document.getElementById("password").value)
      }
      
      socket.on('success', (value) => {
        
        if (value != (false||'error')){
          document.cookie = "userid="+value+"; expires=9999;samesite=none;secure=true";
          document.cookie = "username="+document.getElementById("username").value+"; expires=9999;samesite=none;secure=true";
//          alert(document.cookie)
          document.location="/"
        }
        else{alert("Failure. Retry or press 'Help'")}
      });
    </script>
  </body>
</html>